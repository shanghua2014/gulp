var huanxi=angular.module("huanxi",[]);huanxi.config(["$httpProvider",function(t){t.defaults.transformRequest=function(t){return void 0===t?t:$.param(t)},t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"}]),huanxi.controller("huanxiCtrl",["$scope","$location","$http",function(t,e,o){t.movie={movieTitle:"",score:"",pcslogan:"",info:"",img:"",mid:"",path:"",moviePath:"",comment:""},t.wxinfo={};var i=e.path();i=i.substr(1,i.length),t.movie.mid=i.split("=")[1],o({method:"post",url:DB.config.getAPI(135),data:{mid:t.movie.mid}}).success(function(e){1==getCookie("isvip")?(e.result.cast_url=e.result.cast_url?e.result.cast_url:e.result.look_url,t.movie.moviePath=e.result.cast_url+".m3u8?pt=3&dt=1&ra=1"):t.movie.moviePath=e.result.look_url+".m3u8?pt=3&dt=1&ra=1",t.movie.movieTitle="「"+e.result.title+"」",t.movie.score="评分："+e.result.rating,t.movie.pcslogan=e.result.appslogan,t.movie.pcslogan=e.result.appslogan,t.movie.info=e.result.desc,$("#flashMovie").html('<video controls="controls" id="" poster="'+e.result.stills+'"  src="http://media.m3u8.huanxi.com/vod/'+t.movie.moviePath+' height="410" width="750"><source src="movie.ogg" type="video/ogg" /></video>'),$("body").append("<script>var wxconfig = {title : '"+e.result.title+"',link : '"+DB.config.url+"/newhtml/wap/index.shtml#/mid="+t.movie.mid+"',imgUrl : '"+e.result.stills+"',desc : '"+e.result.desc+"'}</script>")}).error(function(){console.error("ajax error")})}]),huanxi.directive("moviePlay",["$http",function(t){return{link:function(e){t({method:"post",url:DB.config.getAPI(300),data:{mid:e.movie.mid,page:1,size:4}}).success(function(t){e.movie.comment=t.result.comments}).error(function(){console.error("ajax error")})}}}]),huanxi.directive("commentcont",function(){return{restrict:"C",transclude:!1,templateUrl:"commentcont.html"}}),huanxi.directive("footer",function(){return{restrict:"C",templateUrl:"footer.html"}});